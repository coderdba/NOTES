============================
AZURE AD - APP REGISTRATION
============================
https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app
https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal

GRAPH
Graph user details: https://docs.microsoft.com/en-us/graph/api/resources/user?view=graph-rest-1.0
(see JSON representation)

STATIC WEB APP SECURITY
https://docs.microsoft.com/en-us/azure/static-web-apps/assign-roles-microsoft-graph
https://docs.microsoft.com/en-us/azure/static-web-apps/authentication-authorization?tabs=invitations
https://docs.microsoft.com/en-us/azure/static-web-apps/user-information?tabs=javascript
https://docs.microsoft.com/en-us/azure/static-web-apps/authentication-custom?tabs=aad

==============================
STATIC WEB APP - UI+API COMBO
==============================
https://medium.com/bb-tutorials-and-thoughts/react-configuring-environment-variables-in-azure-static-web-apps-service-699eaf0b5e60
- FROM bpn

Doc - https://github.com/bbachi/react-azure-static-web-app
Doc - https://docs.microsoft.com/en-us/azure/static-web-apps/getting-started?tabs=react
Example - https://medium.com/bb-tutorials-and-thoughts/react-configuring-environment-variables-in-azure-static-web-apps-service-699eaf0b5e60
- https://github.com/bbachi/react-azure-static-web-app

Function app, 'func start' - needed to run functions locally and for static web apps - https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local
- also includes how to install "Azure Functions Core Tools" on Windows, Mac etc

==========================
CODE SAMPLES - MICROSOFT
==========================
https://github.com/Azure-Samples
- Azure AD with react-msal - https://github.com/Azure-Samples/ms-identity-javascript-react-spa

=======================
SERVICE PRINCIPAL
=======================
Concept: https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals
How to Create: https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal
- https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles

============================================================================================
App registration vs service principal vs enterprise applications
============================================================================================
- https://marileeturscak.com/posts/app-registrations-enterprise-applications-service-principals

====================
AZURE AD WITH REACT
====================
https://medium.com/@pavelray/connect-your-react-app-with-azure-ad-using-3ddd39223d27 --> very good --> actually worked with mk

Official docs:
https://docs.microsoft.com/en-us/azure/active-directory-b2c/enable-authentication-in-node-web-app
https://docs.microsoft.com/en-us/azure/active-directory-b2c/configure-a-sample-node-web-app

======================
AZURE AD WITH PHP
======================
https://www.lewisroberts.com/2015/09/04/single-sign-on-with-azure-ad-in-php/ --> this in mk
https://katystech.blog/projects/php-azuread-oauth-login
https://www.eschrade.com/page/almost-stupid-easy-php-integration-with-active-directory-on-azure/

======================
AZURE AD WITH REACT
======================
react-aad-msal
https://www.npmjs.com/package/react-aad-msal
https://devblogs.microsoft.com/microsoft365dev/msal-for-react-is-here/
https://medium.com/@pavelray/connect-your-react-app-with-azure-ad-using-3ddd39223d27

===========================
READ FROM AZURE KEY VAULT
===========================

React
https://docs.microsoft.com/en-us/azure/key-vault/secrets/quick-create-node
https://stackoverflow.com/questions/57376119/how-to-retrieve-azure-key-vault-in-react-js

Golang
- https://medium.com/@charithwick/accessing-secrets-from-azure-keyvault-with-go-48fcc988009b (with service principal and service principal password)
- https://github.com/stevebargelt/goAzureKeyVault (with service principal and service principal's password)

From mrk trial:
    REFERENCES
    https://thecodeblogger.com/2020/06/03/azure-web-app-and-managed-identity-to-access-key-vault/
    https://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references?tabs=azure-cli
    --> Do not configure the "authorized application" or applicationId settings, as this is not compatible with a managed identity.
    https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/howto-assign-access-portal

    ERROR
    --> this error went away once managed-identity was assigned to azure-app and access was provided to it in keyvault access policy
    /home/LogFiles/2022_06_06_lw1sdlwk00001A_default_docker.log  (https://my-kvreader.scm.azurewebsites.net/api/vfs/LogFiles/2022_06_06_lw1sdlwk00001A_default_docker.log)
    2022-06-06T11:33:42.715332365Z 2022/06/06 11:33:42 INFO - showdbname(): Endpoint Hit: showdbname
    2022-06-06T11:33:43.881987308Z 2022/06/06 11:33:43 ERR - showdbname(): Failed to obtain PG-DBNAME from keyvault: %v DefaultAzureCredential: failed to acquire a token.
    2022-06-06T11:33:43.882035208Z Attempted credentials:
    2022-06-06T11:33:43.882042108Z 	EnvironmentCredential: missing environment variable AZURE_TENANT_ID
    2022-06-06T11:33:43.882047408Z 	ManagedIdentityCredential: IMDS token request timed out
    2022-06-06T11:33:43.882052008Z 	AzureCLICredential: Azure CLI not found on path

Accessing azure key vault: App registration based??:
https://stackoverflow.com/questions/62705723/get-registered-azure-app-to-access-key-vault
https://docs.microsoft.com/en-us/azure/key-vault/general/security-features --> access and other security features
https://docs.microsoft.com/en-us/azure/key-vault/general/authentication#tutorial --> using managed identity and other things

https://docs.microsoft.com/en-us/azure/key-vault/general/tutorial-net-create-vault-azure-web-app 
  --> .net with "managed identity" (also how to assign managed identity to app)
https://docs.microsoft.com/en-us/azure/developer/go/azure-sdk-authentication-managed-identity?tabs=azure-cli --> golang with managed identity?

https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app --> app registration creation
https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview --> about managed identity 

Access from REST api, Postman:
https://www.c-sharpcorner.com/article/how-to-access-azure-key-vault-secrets-through-rest-api-using-postman/

Access from an app using app registration:
https://damienbod.com/2019/02/07/using-azure-key-vault-from-an-non-azure-app/

=====================
APPLICATION GATEWAY
=====================
Protect apis using App gateway - https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/apis/protect-apis

=====================
TERRAFORM
=====================
App Service Linux - https://github.com/guillermo-musumeci/terraform-azure-app-services-linux

=====================
METRICS
=====================
Custom metrics from Azure monitoring metrics: https://medium.com/asos-techblog/using-the-azure-monitor-metrics-api-to-create-custom-metrics-933be1795629

=====================
AZURE REST API
=====================
https://docs.microsoft.com/en-us/rest/api/azure/
- Metrics query: https://docs.microsoft.com/en-us/rest/api/monitor/Metrics/List

==================================== 
API, AUTHORIZED WEB CLIENT
====================================

Microsoft Identity Platform docs (azure ad, graph etc)
- Quickstart: Protect a web API with the Microsoft identity platform
https://docs.microsoft.com/en-us/azure/active-directory/develop/web-api-quickstart?pivots=devlang-aspnet
(see section "Pre-authorize your client application)

- Protected web-api
https://docs.microsoft.com/en-us/azure/active-directory/develop/scenario-protected-web-api-overview

API to API call 
- https://docs.microsoft.com/en-us/azure/active-directory/develop/scenario-web-api-call-api-overview

App service documentation:
- Authentication and authorization in Azure App Service and Azure Functions (app registration etc)
https://docs.microsoft.com/en-us/azure/app-service/scenario-secure-app-authentication-app-service

==========================================
WEB APP ACCESS RESTRICTION, WHITELISTING
==========================================
IP, Subnet based restriction - https://docs.microsoft.com/en-us/azure/app-service/app-service-ip-restrictions
Giving static IP to web app - https://www.azureblue.io/how-to-use-fix-ips-with-azure-app-service
Private endpoint, private network (ADDITIONAL COST) - https://docs.microsoft.com/en-us/azure/app-service/networking/private-endpoint
