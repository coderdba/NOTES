Main reference: https://www.youtube.com/watch?app=desktop&v=86I8m7r8iTI

Also see:
- https://www.ibm.com/docs/en/db2/11.1?topic=reference-s#r0001347
- useful db2 commands: https://blogs.sap.com/2013/07/12/useful-db2-commands/
- useful db2 commands: https://orahow.com/top-50-most-important-db2-commands-for-database-administrator/
- status of long running query: https://stackoverflow.com/questions/41722567/how-to-check-the-status-of-long-running-db2-query
In DB2 for LUW 11.1 there is a text-based dsmtop utility that allows you to monitor the DB2 instance, down to individual executing statements, in real time. It's pre-11.1 equivalent is called db2top.

There is also a Web-based application, IBM Data Server Manager, which has a free edition with basic monitoring features.

Finally, you can query one of the supplied SQL monitor interfaces, for example, the SYSIBMADM.MON_CURRENT_SQL view:

SELECT session_auth_id,
       application_handle,
       elapsed_time_sec,
       activity_state,
       rows_read,
       SUBSTR(stmt_text,1,200)
FROM sysibmadm.mon_current_sql
ORDER BY elapsed_time_sec DESC
FETCH FIRST 5 ROWS ONLY

db2top
data server manager
data management console
db2pd

Using db2pd
- 2 commands that show which ones are using high cpu
- To pose artificial load - do a cartesian join - select count(*) from syscat.tables, syscat.tables, syscat.tables
- Top command now shows command "db2sysc" is taking high cpu
- The 2 commands:
-- db2pd -edus
-- db2pd -db SAMPLE -applications

db2pd -edus
EDU ID, TID, Kernel ID, EDU Name, USR(s), SYS(s)
The EDU Name will be like - db2agntdp, db2agent, db2pfchr, db2wlmd ...

db2pd -db SAMPLE -applications
This shows CoorEDUID - and AppHandl
Get the AppHandl for the CoorEDUID obtained for high consumer in the step "db2pd -edus"

db2 list applications
Will give Appl Handl, Application Id, Application Name etc
Then run "db2 get snapshot for application agentid <give the agent id>"
- the agent id is the AppHandl gotten earlier
That will give much more detailed info on which server the app is coming from, various statistics etc
