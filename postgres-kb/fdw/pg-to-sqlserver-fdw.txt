https://www.mssqltips.com/sqlservertip/3663/sql-server-and-postgresql-foreign-data-wrapper-configuration-part-3/
https://aws.amazon.com/blogs/database/use-the-tds_fdw-extension-to-migrate-data-from-sql-server-to-postgresql/
https://dbsguru.com/access-the-mssql-database-from-postgresql-using-tds-foreign-data-wrapper-tds_fdw/
https://github.com/tds-fdw/tds_fdw
https://stackoverflow.com/questions/47360413/tds-fdw-adaptive-server-connection-failing-but-message-is-success
https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/postgresql-tds-fdw.html

Enable postgres fdw, tds fdw, oracle fdw extensions in server parameters --> azure.extensions
Verify: show azure.extensions

create extension postgres_fdw;
create extension tds_fdw;


CREATE SERVER mssql_adworks2012_server
FOREIGN DATA WRAPPER tds_fdw
OPTIONS (servername '10.51.2.228', port '1433', database 'dms_sample');
GRANT USAGE ON FOREIGN SERVER mssql_adworks2012_server TO dms_user;  

CREATE USER MAPPING FOR postgres
SERVER mssql_adworks2012_server
OPTIONS (username 'sa', password 'mypassword'); --> this mapping is in postgres, but username/password is for sql server

CREATE FOREIGN TABLE mssql_adworks2012_Sales_SalesPerson_table (
BusinessEntityID int NOT NULL,
TerritoryID int NULL,
SalesQuota money NULL,
Bonus money NOT NULL,
CommissionPct real NOT NULL,
SalesYTD money NOT NULL,
SalesLastYear money NOT NULL,
ModifiedDate text NOT NULL
)
SERVER mssql_adworks2012_server 
OPTIONS (database 'AdventureWorks2012', query 'SELECT BusinessEntityID, TerritoryID, SalesQuota, Bonus, CommissionPct, SalesYTD, SalesLastYe
OPTIONS (table 'mytable')
==============
https://stackoverflow.com/questions/47360413/tds-fdw-adaptive-server-connection-failing-but-message-is-success

CREATE EXTENSION tds_fdw;

-- DROP SERVER mssql_acudb_server;
CREATE SERVER mssql_acudb_server
    FOREIGN DATA WRAPPER tds_fdw
    OPTIONS (servername 'wwww', port '1433', database 'AcuDB');

ALTER SERVER mssql_acudb_server
    OPTIONS (ADD msg_handler 'notice');

-- DROP USER MAPPING FOR postgres SERVER mssql_acudb_server;
CREATE USER MAPPING FOR postgres
    SERVER mssql_acudb_server
    OPTIONS (username 'xxxx\yyyy', password 'zzzz');

-- DROP FOREIGN TABLE acudb_project;
CREATE FOREIGN TABLE acudb_project (
    id BIGINT NOT NULL,
    "name" TEXT NOT NULL,
    path_prefix TEXT NOT NULL,
    "type" TEXT NOT NULL,
    sec_active_size BIGINT NULL
)
SERVER mssql_acudb_server 
    OPTIONS (query 'SELECT [id],[name],[path_prefix],[type],[sec_active_size] 
    FROM [projects]');

SELECT * FROM acudb_project
